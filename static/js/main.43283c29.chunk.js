(window["webpackJsonpcdp-frontend"]=window["webpackJsonpcdp-frontend"]||[]).push([[0],{351:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=351},448:function(e,t,n){e.exports=n(798)},453:function(e,t,n){},798:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(50),i=n.n(c),o=(n(453),n(153)),l=n(62),u=n(82),s=n(119),m=n(122),p=n(127),d=n(32);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){o.a.set(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({page:e},t)),o.a.pageview(e)};return function(t){function a(){return Object(l.a)(this,a),Object(s.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(p.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){n(window.location.hash.substr(1))}},{key:"componentDidUpdate",value:function(e){var t=this.props.location.pathname,a=e.location.pathname;t!==a&&n(a)}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(a.Component)}var v=n(41),b=n(86),E=n(825),y=n(809),g=n(10),w=g.a.h1({}),O=Object(g.a)("span")({transition:".8s all",borderRadius:"5px",padding:"1rem .5rem",":hover":{backgroundColor:"#F5F5F5",color:"black"}}),j=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{vertical:!0},r.a.createElement(y.a,null,r.a.createElement(v.b,{to:"/"},r.a.createElement(w,null,"Council Data Project")))),r.a.createElement(E.a,{vertical:!0},r.a.createElement(y.a,null,r.a.createElement(v.b,{to:"/events"},r.a.createElement(O,null,"Events")),r.a.createElement(v.b,{to:"/people"},r.a.createElement(O,{style:{marginLeft:"10px"}},"People")))))},x=n(824),k=n(823),S=n(819),P=function(){return r.a.createElement(E.a,{inverted:!0,vertical:!0,style:{padding:"5em 0em"}},r.a.createElement(y.a,null,r.a.createElement(x.a,{inverted:!0,stackable:!0},r.a.createElement(x.a.Row,{columns:"equal"},r.a.createElement(x.a.Column,null,r.a.createElement(k.a,{inverted:!0,as:"h4",content:"About"}),r.a.createElement(S.a,{link:!0,inverted:!0},r.a.createElement(S.a.Item,{as:"a"},"The Project"),r.a.createElement(S.a.Item,{as:"a"},"The Team"),r.a.createElement(S.a.Item,{as:"a"},"Other Work"))),r.a.createElement(x.a.Column,null,r.a.createElement(k.a,{inverted:!0,as:"h4",content:"Seattle"}),r.a.createElement(S.a,{link:!0,inverted:!0},r.a.createElement(S.a.Item,{as:"a"},"City of Seattle"),r.a.createElement(S.a.Item,{as:"a"},"Seattle Open Data"),r.a.createElement(S.a.Item,{as:"a"},"Seattle Channel"))),r.a.createElement(x.a.Column,null,r.a.createElement(k.a,{inverted:!0,as:"h4",content:"Developers"}),r.a.createElement(S.a,{link:!0,inverted:!0},r.a.createElement(S.a.Item,{as:"a"},"Council Data Project"),r.a.createElement(S.a.Item,{as:"a"},"Seattle Specific"),r.a.createElement(S.a.Item,{as:"a"},"Transcription Runner")))),r.a.createElement(x.a.Row,null,r.a.createElement("p",null,"This web application is not funded by, nor associated with the Seattle City Council. This is a prototype web application to show the viability of an automated and collaborativly sourced city council transcription service. The transcripts are roughly ninty-percent accurate, and therefore may not represent what was actually said.")))))},C=n(14),D=n.n(C),_=n(23),R=n(21),A=n(810),I=n(800),T=Object(g.a)(y.a)({minHeight:"100vh"}),B=Object(g.a)(y.a)({marginTop:"2em !important",marginBottom:"5em !important"}),M=Object(g.a)(A.a)({width:"50% !important"}),N=Object(g.a)(x.a)({display:"block",marginTop:"150px !important"}),U=function(e){var t=r.a.useState(""),n=Object(R.a)(t,2),a=n[0],c=n[1],i=function(){var e=Object(_.a)(D.a.mark(function e(t,n){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.value,c(a);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(T,null,r.a.createElement(B,null,r.a.createElement(N,{verticalAlign:"middle",centered:!0},r.a.createElement(x.a.Row,null,r.a.createElement("h1",null,"Search City Council Transcripts")),r.a.createElement(x.a.Row,null,r.a.createElement(M,{placeholder:"Enter a keyword to search meeting transcripts",value:a,onChange:i,onKeyPress:function(t){"Enter"===t.key&&e.history.push({pathname:"/search",search:"?q=".concat(a.trim().replace(/\s+/g,"+")),state:{query:a}})}}),r.a.createElement(I.a,{attached:"right",primary:!0,as:v.b,to:{pathname:"/search",search:"?q=".concat(a.trim().replace(/\s+/g,"+")),state:{query:a}}},"Search")))))},q=n(196),F=n.n(q),L=n(816),V=n(821),H=n(44),Y=n.n(H),z=function(e){return Y.a.utc(e).format("MMMM D, YYYY h:mm A")},W=Object(g.a)(V.a)({boxShadow:"none !important"}),Q=Object(g.a)(V.a.Content)({padding:"0 !important"}),G=function(e){var t=e.name,n=e.date,a=e.description,c=e.link,i=e.query;return r.a.createElement(W,{fluid:!0},r.a.createElement(Q,null,r.a.createElement(V.a.Header,null,r.a.createElement(v.b,{to:function(){var e=i?i.trim().replace(/\s+/g," "):"";return{pathname:c,search:e?"?q=".concat(e.replace(/\s+/g,"+")):"",state:{query:e}}}()},t)),r.a.createElement(V.a.Meta,null,z(n)),r.a.createElement(V.a.Description,null,a)))},J=r.a.memo(function(e){var t=e.events,n=e.query;return r.a.createElement(V.a.Group,{centered:!0},t.map(function(e){var t=e.name,a=e.date,c=e.description,i=e.id;return r.a.createElement(G,{key:i,name:t,date:a,description:c,link:"/events/".concat(i),query:n})}))}),K=n(818),Z=n(75),$=g.a.div({display:"flex",justifyContent:"space-between",padding:"1em 0"}),X=Object(g.a)(K.a)({minWidth:"250px !important",maxWidth:"90% !important",boxShadow:"none !important","@media(max-width:500px)":{width:"86% !important"}}),ee=Object(g.a)(K.a.Content)({flexGrow:"1",overflowY:"auto !important"}),te=g.a.div({maxHeight:"45vh",display:"flex",flexDirection:"column"}),ne=r.a.memo(function(e){var t=e.filter,n=e.header,a=e.handlePopupClose,c=e.mountNodeRef,i=e.children,o=t.clear,l=t.getTextRep,u=t.isActive,s=r.a.useState(!1),m=Object(R.a)(s,2),p=m[0],d=m[1],f=function(){d(!1),a()};return r.a.createElement(X,{basic:!0,flowing:!0,mountNode:c.current,on:"click",onClose:f,onOpen:function(){d(!0)},open:p,pinned:!0,offset:"0, -5px",position:"bottom left",positionFixed:!0,trigger:r.a.createElement(I.a,{icon:!0,labelPosition:"right",basic:!u()},r.a.createElement(Z.a,{name:"angle down"}),l())},r.a.createElement(te,null,r.a.createElement(k.a,{content:n}),r.a.createElement(ee,null,i),r.a.createElement($,null,r.a.createElement(I.a,{size:"mini",onClick:function(){o()}},r.a.createElement(Z.a,{name:"remove"})," Clear"),r.a.createElement(I.a,{size:"mini",primary:!0,onClick:f},r.a.createElement(Z.a,{name:"checkmark"})," Save"))))}),ae=function(e,t){var n=Y.a.utc(e.start,"YYYY-MM-DD"),a=Y.a.utc(e.end,"YYYY-MM-DD"),r=n.format("MMM D, YYYY"),c=a.format("MMM D, YYYY");return e.start&&e.end?n.year()===a.year()&&n.month()===a.month()?"".concat(r.split(",")[0]," - ").concat(a.date(),", ").concat(a.year()):n.year()===a.year()?"".concat(r.split(",")[0]," - ").concat(c.split(",")[0],", ").concat(a.year()):"".concat(r," - ").concat(c):e.start?"".concat(r," -"):e.end?"- ".concat(c):t},re=r.a.memo(function(e){var t=e.filter,n=t.value,a=t.handleChange,c=function(e,t){var n=t.name,r=t.value;a(n,r)};return r.a.createElement(L.a,null,r.a.createElement(L.a.Field,null,"From"),r.a.createElement(L.a.Input,{fluid:!0,name:"start",type:"date",onChange:c,value:n.start}),r.a.createElement(L.a.Field,null,"To"),r.a.createElement(L.a.Input,{fluid:!0,name:"end",type:"date",onChange:c,value:n.end}))}),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return-1!==e.toLowerCase().indexOf(t.toLowerCase())},ie=function(e,t){var n=Object.values(e).filter(function(e){return e}).length;return n?"".concat(t," : ").concat(n):t},oe=Object(g.a)(L.a.Input)({paddingRight:".8em"}),le=r.a.memo(function(e){var t=e.filter,n=e.options,a=e.optionQuery,c=e.setOptionQuery,i=t.filterName,o=t.value,l=t.handleChange,u=function(e,t){var n=t.name,a=t.checked;l(n,a)},s=n;return n.length>5&&(s=n.filter(function(e){var t=e.text;return ce(t,a)})),r.a.createElement(L.a,null,n.length>5&&r.a.createElement(oe,{placeholder:"Search ".concat(i," Options"),value:a,onChange:function(e,t){var n=t.value;c(n)}}),s.map(function(e){return r.a.createElement(L.a.Checkbox,{key:e.name,label:e.text,name:e.name,checked:o[e.name],onChange:u})}))}),ue=n(104),se=n.n(ue);n(566);function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(_.a)(D.a.mark(function e(t){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var he={eq:"==",contains:"array-contains",contains_any:"array-contains-any",in:"in",gt:">",lt:"<",gteq:">=",lteq:"<="},ve={asc:"asc",desc:"desc"},be=function e(t){Object(l.a)(this,e);var n=new Error("Unsure how to create WhereCondition from received data: ".concat(t));if(t instanceof Array)if(2===t.length)this.columnName=t[0],this.operator=he.eq,this.value=t[1];else{if(3!==t.length)throw n;if(!Object.values(he).includes(t[1]))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t[1],"\n                        Allowed WhereCondition operators: ").concat(Object.values(he),"\n                    "));this.columnName=t[0],this.operator=t[1],this.value=t[2]}else{if(!(t instanceof Object))throw n;if(t.columnName&&t.operator&&t.value){if(!Object.values(he).includes(t.operator))throw new Error("\n                        Unknown WhereCondition operator: ".concat(t.operator,"\n                        Allowed WhereCondition operators: ").concat(Object.values(he),"\n                    "));this.columnName=t.columnName,this.operator=t.operator,this.value=t.value}else{if(!t.columnName||!t.value)throw n;this.columnName=t.columnName,this.operator=he.eq,this.value=t.value}}},Ee=function e(t){Object(l.a)(this,e);var n,a=new Error("Unsure how to create OrderCondition from received data: ".concat(t));if("string"===typeof(n=t)||n instanceof String)this.columnName=t,this.operator=ve.desc;else if(t instanceof Array)if(1===t.length)this.columnName=t[0],this.operator=ve.desc;else{if(2!==t.length)throw a;if(!Object.values(ve).includes(t[1]))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t[1],"\n                        Allowed OrderCondition operators: ").concat(Object.values(ve),"\n                    "));this.columnName=t[0],this.operator=t[1]}else{if(!(t instanceof Object))throw a;if(t.columnName&&t.operator){if(!Object.values(ve).includes(t.operator))throw new Error("\n                        Unknown OrderCondition operator: ".concat(t.operator,"\n                        Allowed OrderCondition operators: ").concat(Object.values(ve),"\n                    "));this.columnName=t.columnName,this.operator=t.operator}else{if(!t.columnName)throw a;this.columnName=t.columnName,this.operator=ve.desc}}},ye=new(function(){function e(t){Object(l.a)(this,e),this.credentials=t,se.a.initializeApp(this.credentials),this.connection=se.a.firestore()}return Object(u.a)(e,[{key:"selectRowById",value:function(){var e=Object(_.a)(D.a.mark(function e(t,n){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connection.collection(t).doc(n).get();case 3:return a=e.sent,e.abrupt("return",a.data());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_unpackQueryResults",value:function(){var e=Object(_.a)(D.a.mark(function e(t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.forEach(function(e){var t=e.data(),a=fe({id:e.id},t);n.push(a)}),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"selectRowsAsArray",value:function(){var e=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i,o=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:[],a=o.length>2&&void 0!==o[2]?o[2]:void 0,r=o.length>3&&void 0!==o[3]?o[3]:1e3,e.prev=3,c=this.connection.collection(t),n.forEach(function(e){c=c.where(e.columnName,e.operator,e.value)}),a&&(c=c.orderBy(a.columnName,a.operator)),c=c.limit(r),e.next=11,c.get().catch(function(e){throw new Error("Failed to retrieve data from database. Error: ".concat(e))});case 11:return i=e.sent,e.next=14,this._unpackQueryResults(i);case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(3),e.abrupt("return",Promise.reject(e.t0));case 20:case 21:case"end":return e.stop()}},e,this,[[3,17]])}));return function(t){return e.apply(this,arguments)}}()}]),e}())({apiKey:"AIzaSyA7aO6weBcOUBZLmxE3aMyn4NeElVEHZUc",authDomain:"cdp-sea.firebaseapp.com",projectId:"cdp-seattle",databaseURL:"https://cdp-sea.firebaseio.com"}),ge=function(e,t){var n,a;if(e.by)switch(e.by){case"name":n="Committee";break;case"date":n="Date";break;case"value":n="Relevance"}e.order&&(a=e.order===ve.asc?"Ascending":"Descending");var r=t;return r+=n&&a?" by ".concat(n,": ").concat(a):n?" by ".concat(n):a?" ".concat(a):" By"},we=r.a.memo(function(e){var t=e.filter,n=e.sortByOptions,a=t.value,c=t.handleChange,i=function(e,t){var n=t.name,a=t.value;c(n,a)};return r.a.createElement(L.a,null,r.a.createElement(L.a.Field,null,"Sort By"),n.map(function(e){return r.a.createElement(L.a.Checkbox,{key:e.value,radio:!0,label:e.label,name:"by",value:e.value,checked:a.by===e.value,onChange:i})}),r.a.createElement(L.a.Field,null,"Sort Order"),r.a.createElement(L.a.Checkbox,{radio:!0,label:"Ascending",name:"order",value:ve.asc,checked:a.order===ve.asc,onChange:i}),r.a.createElement(L.a.Checkbox,{radio:!0,label:"Descending",name:"order",value:ve.desc,checked:a.order===ve.desc,onChange:i}))}),Oe=(n(799),n(424)),je=n.n(Oe),xe=n(42),ke=n.n(xe);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ce=se.a.storage();function De(){return _e.apply(this,arguments)}function _e(){return(_e=Object(_.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.selectRowsAsArray("event",[],new Ee(["event_datetime",ve.desc]));case 3:return t=e.sent,e.next=6,Ze(t);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function Re(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(_.a)(D.a.mark(function e(t,n){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.selectRowsAsArray("event_minutes_item",[new be(["event_id",he.eq,t])],new Ee(["index",n]));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case 11:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Ie(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(_.a)(D.a.mark(function e(t){var n,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.selectRowById("minutes_item",t.minutes_item_id);case 3:return n=e.sent,e.next=6,ye.selectRowsAsArray("minutes_item_file",[new be(["minutes_item_id",he.eq,t.minutes_item_id])],new Ee(["name",ve.asc]));case 6:return a=e.sent,e.abrupt("return",Pe({},t,{minutes_item:Pe({id:t.minutes_item_id},n,{file:a})}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 13:case 14:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Be(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(_.a)(D.a.mark(function e(t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.selectRowById("body",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Ne(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.selectRowsAsArray("transcript",[new be(["event_id",he.eq,t])]);case 3:return n=e.sent,a=Object(R.a)(n,1),r=a[0],e.next=8,ye.selectRowById("file",r.file_id);case 8:return c=e.sent,i=Ce.refFromURL(c.uri),e.next=12,i.getDownloadURL().then(function(e){return me(e)});case 12:return o=e.sent,e.abrupt("return",o);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,null,[[0,16]])}))).apply(this,arguments)}function qe(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter(function(e){return null!==e.decision}),a=[],n.forEach(function(e){a.push({matter:e.minutes_item.matter,name:e.minutes_item.name,id:e.id,decision:e.decision,index:e.index})}),r=a.map(function(e){return ye.selectRowsAsArray("vote",[new be(["event_minutes_item_id",he.eq,e.id])])}),e.next=6,Promise.all(r);case 6:return c=e.sent,e.next=9,ye.selectRowsAsArray("person");case 9:return i=e.sent,a.forEach(function(e,t){var n=c[t],a=[];n.forEach(function(e){var t=i.find(function(t){return t.id===e.person_id});a.push({decision:e.decision,person_id:e.person_id,full_name:t.full_name})}),e.formattedIndividualVotes=Object(xe.sortBy)(a,function(e){return e.full_name})}),e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Le(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.selectRowById("event",t);case 3:return n=e.sent,e.next=6,Be(n.body_id);case 6:return a=e.sent,e.next=9,Re(t,ve.asc);case 9:return r=e.sent,e.next=12,Promise.all(r.map(function(e){return Ie(e)}));case 12:return c=e.sent,e.next=15,Ne(t);case 15:return i=e.sent,e.next=18,qe(c);case 18:return o=e.sent,e.abrupt("return",{id:t,name:a.name,description:a.description,videoUrl:n.video_uri,date:Y.a.utc(n.event_datetime.toMillis()).toISOString(),minutes:c,transcript:i.data,scPageUrl:n.source_uri,votes:o});case 22:return e.prev=22,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}},e,null,[[0,22]])}))).apply(this,arguments)}function He(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i,o,l,u,s,m=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},a=m.length>2&&void 0!==m[2]?m[2]:[],r=m.length>3&&void 0!==m[3]?m[3]:{},c=0,e.prev=4,je.a.PorterStemmer.attach(),0!==(i=t.tokenizeAndStem()).length){e.next=9;break}return e.abrupt("return",[]);case 9:return e.next=11,Promise.all(i.map(function(e){return ye.selectRowsAsArray("indexed_event_term",[new be(["term",he.eq,e])])}));case 11:return o=e.sent,l=Object(xe.mapValues)(Object(xe.groupBy)(Object(xe.flatten)(o),function(e){return e.event_id}),function(e,t){return e.reduce(function(e,t){return Pe({},e,{value:e.value+t.value})},{event_id:t,value:0})}),u=Object(xe.filter)(l,function(e){return e.value>c}),e.next=16,Promise.all(u.map(function(e){var t=e.event_id;return ye.selectRowById("event",t)}));case 16:return s=e.sent,e.next=19,Ze(s);case 19:return(s=e.sent).forEach(function(e,t){e.id=u[t].event_id,e.value=u[t].value}),s=et(s=Xe(s,n,a),r,!0),e.abrupt("return",s);case 26:return e.prev=26,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 29:case"end":return e.stop()}},e,null,[[4,26]])}))).apply(this,arguments)}function ze(){return We.apply(this,arguments)}function We(){return(We=Object(_.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",ye.selectRowsAsArray("body",[],new Ee(["name",ve.asc])));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:case"end":return e.stop()}},e,null,[[0,4]])}))).apply(this,arguments)}function Qe(e,t,n){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(_.a)(D.a.mark(function e(t,n,a){var r,c;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[],n.length?n.forEach(function(e){return r.push(Je(t,e))}):r.push(Je(t)),e.t0=xe.flatten,e.next=6,Promise.all(r);case 6:return e.t1=e.sent,c=(0,e.t0)(e.t1),e.next=10,Ze(c);case 10:return c=et(c=e.sent,a),e.abrupt("return",c);case 15:return e.prev=15,e.t2=e.catch(0),e.abrupt("return",Promise.reject(e.t2));case 18:case"end":return e.stop()}},e,null,[[0,15]])}))).apply(this,arguments)}function Je(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i,o,l=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,a=[],n&&a.push(new be(["body_id",he.eq,n])),t.start&&(r=Y.a.utc(t.start,"YYYY-MM-DD"),c=se.a.firestore.Timestamp.fromMillis(r.valueOf()),a.push(new be(["event_datetime",he.gteq,c]))),t.end&&(i=Y.a.utc(t.end,"YYYY-MM-DD").add(1,"days").subtract(1,"milliseconds"),o=se.a.firestore.Timestamp.fromMillis(i.valueOf()),a.push(new be(["event_datetime",he.lteq,o]))),e.abrupt("return",ye.selectRowsAsArray("event",a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ze(e){return $e.apply(this,arguments)}function $e(){return($e=Object(_.a)(D.a.mark(function e(t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze();case 2:return n=e.sent,e.abrupt("return",t.map(function(e){var t=n.find(function(t){return t.id===e.body_id});return{id:e.id,body_id:t.id,name:t.name,description:t.description,date:Y.a.utc(e.event_datetime.toMillis()).toISOString()}}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(e,t,n){return e.filter(function(e){if(n.length&&-1===n.indexOf(e.body_id))return!1;if(t.start&&Y.a.utc(e.date).isBefore(Y.a.utc(t.start)))return!1;if(t.end){var a=Y.a.utc(t.end,"YYYY-MM-DD").add(1,"days").subtract(1,"milliseconds");if(Y.a.utc(e.date).isAfter(a))return!1}return!0})}function et(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=t.by&&t.order?Object(xe.orderBy)(e,[t.by],[t.order]):Object(xe.orderBy)(e,[n?"value":"date"],[ve.desc])}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function at(){return rt.apply(this,arguments)}function rt(){return(rt=Object(_.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.selectRowsAsArray("person",[],new Ee(["full_name",ve.asc]));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(e){return it.apply(this,arguments)}function it(){return(it=Object(_.a)(D.a.mark(function e(t){var n,a,r,c,i,o,l,u,s,m,p;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ye.selectRowById("person",t);case 3:return a=e.sent,e.next=6,ye.selectRowsAsArray("vote",[new be(["person_id",he.eq,t])]);case 6:return r=e.sent,c=r.map(function(e){return ye.selectRowById("event_minutes_item",e.event_minutes_item_id)}),e.next=10,Promise.all(c);case 10:return i=e.sent,o=i.map(function(e){return ye.selectRowById("minutes_item",e.minutes_item_id)}),e.next=14,Promise.all(o);case 14:return l=e.sent,u=i.map(function(e){return ye.selectRowById("event",e.event_id)}),e.next=18,Promise.all(u);case 18:return s=e.sent,e.next=21,ye.selectRowsAsArray("body");case 21:return m=e.sent,r.forEach(function(e,t){var a=i[t],r=l[t],c=s[t],o=m.find(function(e){return e.id===c.body_id}),u={id:e.id,matter:r.matter,name:r.name,voteForPerson:e.decision,decision:a.decision,eventId:a.event_id,index:a.index,eventDate:Y.a.utc(c.event_datetime.toMillis()).toISOString(),body_name:o.name};n.push(u)}),p=Object(xe.orderBy)(n,["eventDate","index"],["desc","desc"]),e.abrupt("return",nt({},a,{votes:p}));case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ot=r.a.memo(function(e){var t=e.filters,n=e.handlePopupClose,a=e.sortByOptions,c=r.a.useRef(),i=r.a.useState([]),o=Object(R.a)(i,2),l=o[0],u=o[1],s=Object(R.a)(t,3),m=s[0],p=s[1],d=s[2],f=r.a.useState(""),h=Object(R.a)(f,2),v=h[0],b=h[1];return r.a.useEffect(function(){var e=!1;return function(){var t=Object(_.a)(D.a.mark(function t(){var n;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze();case 2:n=t.sent,e||u(n);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{filter:m,header:"Select Committees",handlePopupClose:n,mountNodeRef:c},r.a.createElement(le,{filter:m,options:l.map(function(e){return{name:e.id,text:e.name}}),optionQuery:v,setOptionQuery:b})),r.a.createElement(ne,{filter:p,header:"Select Date Range",handlePopupClose:n,mountNodeRef:c},r.a.createElement(re,{filter:p})),r.a.createElement(ne,{filter:d,header:"Select Sorting",handlePopupClose:n,mountNodeRef:c},r.a.createElement(we,{filter:d,sortByOptions:a})),r.a.createElement("div",{ref:c}))});var lt=function(e){r.a.useEffect(function(){return document.title=e,function(){document.title="Council Data Project - Seattle"}},[e])};function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mt(e){return Object.keys(e).filter(function(t){return e[t]})}var pt=function(e,t,n,a){var c=r.a.useState(e),i=Object(R.a)(c,2),o=i[0],l=i[1],u=function(){return Object.values(o).some(function(e){return e!==n})};return{filterName:t,value:o,set:l,clear:function(){l(function(e){var t=st({},e);return Object.keys(t).forEach(function(e){return t[e]=n}),t})},handleChange:function(e,t){l(function(n){return st({},n,Object(d.a)({},e,t))})},getTextRep:function(){return a(o,t)},isActive:u,isSameValue:function(e){if(!e)return!u();for(var t,n=0,a=Object.keys(o);n<a.length;n++){if(t=a[n],o[t]&&!e.hasOwnProperty(t))return!1;if(o[t]!==e[t]&&e.hasOwnProperty(t))return!1}return!0}}},dt=g.a.div({position:"sticky",top:"0",backgroundColor:"white",zIndex:"1",padding:"1em 0 2em","> .ui.button":{marginBottom:"0.5em","@media(max-width:500px)":{width:"100%"}}}),ft=g.a.span({display:"block",color:"grey",marginBottom:"2em"}),ht=g.a.span({color:"grey",fontWeight:"700",fontSize:"1.5em",marginTop:"1em"}),vt=g.a.div({paddingLeft:"1em"}),bt=function(e){e.query;var t=r.a.useState(!1),n=Object(R.a)(t,2),a=n[0],c=n[1],i=r.a.useState(!0),o=Object(R.a)(i,2),l=o[0],u=o[1],s=r.a.useState([]),m=Object(R.a)(s,2),p=m[0],d=m[1],f=pt({start:"",end:""},"Date","",ae),h=pt({},"Committee",!1,ie),v=pt({by:"",order:""},"Sort","",ge);lt("Committee Events"),r.a.useEffect(function(){var e=!1;return function(){var t=Object(_.a)(D.a.mark(function t(){var n;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,De();case 2:n=t.sent,e||(d(n),c(!0));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}},[]);var b=r.a.useRef(),E=r.a.useRef(),y=r.a.useRef(),g=function(){var e=Object(_.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.isSameValue(b.current)&&f.isSameValue(E.current)&&v.isSameValue(y.current)){e.next=12;break}return window.scroll(0,0),u(!1),d([]),e.next=6,Qe(f.value,mt(h.value),v.value);case 6:t=e.sent,d(t),b.current=h.value,E.current=f.value,y.current=v.value,u(!0);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,null,r.a.createElement(ot,{filters:[h,f,v],handlePopupClose:g,sortByOptions:[{label:"Committee",value:"name"},{label:"Date",value:"date"}]})),r.a.createElement(vt,null,a&&l?r.a.createElement(ft,null,p.length," results"):r.a.createElement(ht,null,"Loading..."),r.a.createElement(J,{events:p})))},Et=function(e){var t=e.query,n=e.filterValues,a=Object(R.a)(n,3),c=a[0],i=a[1],o=a[2],l=r.a.useState(!1),u=Object(R.a)(l,2),s=u[0],m=u[1],p=r.a.useState(t),d=Object(R.a)(p,2),f=d[0],h=d[1],v=r.a.useState([]),E=Object(R.a)(v,2),y=E[0],g=E[1],w=pt(i,"Date","",ae),O=pt(c,"Committee",!1,ie),j=pt(o,"Sort","",ge);lt("Search - ".concat(f));var x=Object(b.f)();r.a.useEffect(function(){var e=!1;return function(){var n=Object(_.a)(D.a.mark(function n(){var a;return D.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,He(t,i,mt(c),o);case 2:a=n.sent,e||(g(a),m(!0));case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()(),function(){e=!0}},[t,c,i,o]);var k=r.a.useRef(),S=r.a.useRef(),P=r.a.useRef(),C=r.a.useRef(t),A=function(){O.isSameValue(k.current)&&w.isSameValue(S.current)&&j.isSameValue(P.current)&&C.current===f||(window.scroll(0,0),m(!1),g([]),k.current=O.value,S.current=w.value,P.current=j.value,C.current=f,x.replace({pathname:"/search",search:"?q=".concat(f.trim().replace(/\s+/g,"+")),state:{query:f,committeeFilterValue:O.value,dateRangeFilterValue:w.value,sortFilterValue:j.value}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,null,r.a.createElement(L.a,{onSubmit:function(e){e.preventDefault(),A()}},r.a.createElement(L.a.Group,{widths:"2"},r.a.createElement(L.a.Input,{placeholder:"Enter a keyword to search meeting transcripts",action:r.a.createElement(I.a,{type:"submit",primary:!0},"Search"),value:f,onChange:function(e,t){var n=t.value;h(n)}}))),r.a.createElement(ot,{filters:[O,w,j],handlePopupClose:A,sortByOptions:[{label:"Committee",value:"name"},{label:"Date",value:"date"},{label:"Relevance ",value:"value"}]})),r.a.createElement(vt,null,s?r.a.createElement(ft,null,y.length," results"):r.a.createElement(ht,null,"Loading..."),r.a.createElement(J,{events:y,query:C.current})))},yt=Object(g.a)(y.a)({minHeight:"100vh"}),gt=Object(g.a)(y.a)({marginTop:"2em !important",marginBottom:"5em !important"}),wt=function(e){var t=e.location,n=F.a.parse(t.search).q,a=n?n.trim().replace(/\+/g," "):"",c={},i={start:"",end:""},o={by:"",order:""};return t.state&&(a=t.state.query||a,c=t.state.committeeFilterValue||c,i=t.state.dateRangeFilterValue||i,o=t.state.sortFilterValue||o),r.a.createElement(yt,null,r.a.createElement(gt,null,r.a.createElement(Et,{query:a,filterValues:[c,i,o]})))},Ot=n(815),jt=n(89),xt=n(430),kt=n.n(xt);var St=function(e){e=parseInt(e,10);var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=e-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),t+":"+n+":"+a},Pt=g.a.div({display:"flex",flexWrap:"wrap",alignItems:"center",margin:"1em 0",padding:"0.2em"}),Ct=g.a.div(function(e){return{width:e.isSearch?"100%":"85%",order:e.isSearch?"0":"1",boxSizing:"border-box",fontSize:"16px",lineHeight:"1.5em","@media(max-width:720px)":{width:"100%",order:"0"}}}),Dt=g.a.div(function(e){return{width:e.isSearch?"100%":"15%",order:e.isSearch?"1":"0",boxSizing:"border-box",padding:e.isSearch?"0":"0.5em","@media(max-width:720px)":{width:"100%",padding:"0",order:"1"}}}),_t=r.a.memo(function(e){var t=e.searchText,n=e.transcript,a=e.handleSeek,c=e.isSearch,i=r.a.useRef(null),o=new jt.c({fixedWidth:!0,defaultHeight:100});r.a.useEffect(function(){var e=function(){i.current&&i.current.updatePosition()};return document.addEventListener("update-scroll-position",e),function(){document.removeEventListener("update-scroll-position",e)}},[]);var l=function(){o.clearAll()},u=function(e){var i=e.index,l=e.parent,u=e.key,s=e.style;return r.a.createElement(jt.b,{key:u,cache:o,parent:l,columnIndex:0,rowIndex:i},r.a.createElement("div",{style:s},r.a.createElement(Pt,null,r.a.createElement(Dt,{isSearch:c},r.a.createElement(I.a,{size:"tiny",onClick:function(){return a(n[i].start_time)}},r.a.createElement(Z.a,{name:"play"}),St(n[i].start_time))),r.a.createElement(Ct,{isSearch:c},r.a.createElement(kt.a,{searchWords:[t],autoEscape:!0,textToHighlight:n[i].text})))))};return c?r.a.createElement(jt.a,{onResize:l},function(e){var t=e.width,a=e.height;return r.a.createElement(jt.d,{deferredMeasurementCache:o,height:a,rowCount:n.length,rowHeight:o.rowHeight,rowRenderer:u,scrollToIndex:0,style:{willChange:""},width:t})}):r.a.createElement(jt.e,{ref:i},function(e){var t=e.height,a=e.isScrolling,c=e.onChildScroll,i=e.scrollTop;return r.a.createElement(jt.a,{disableHeight:!0,onResize:l},function(e){var l=e.width;return r.a.createElement(jt.d,{autoHeight:!0,deferredMeasurementCache:o,height:t,isScrolling:a,onScroll:c,rowCount:n.length,rowHeight:o.rowHeight,rowRenderer:u,scrollTop:i,style:{willChange:""},width:l})})})}),Rt=g.a.div({margin:"1em 0",width:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box","@media (min-aspect-ratio:5/4), (min-width:1200px)":{width:"40%",margin:"0"}}),At=g.a.h2({width:"100%"}),It=Object(g.a)(A.a)({width:"100%",fontSize:"16px !important",lineHeight:"1.5 !important"}),Tt=g.a.span({display:"block",marginTop:"1em",color:"grey",paddingLeft:"15px"}),Bt=g.a.span({display:"block",marginTop:"1em",fontSize:"16px !important",lineHeight:"1.5 !important",paddingLeft:"15px"}),Mt=g.a.div({marginTop:"1em",border:"1px solid lightgray",borderRadius:"0.28rem",boxSizing:"border-box",minHeight:"calc(.5625 * 90vw)","@media (min-aspect-ratio:5/4), (min-width:1200px)":{flex:"1 1 auto",minHeight:"0"}}),Nt=function(e){var t=e.transcript,n=e.handleSeek,a=e.mediaQueriesMatches,c=e.query,i=r.a.useState(c),o=Object(R.a)(i,2),l=o[0],u=o[1],s=t.filter(function(e){var t=e.text;return ce(t,l)});return r.a.createElement(Rt,null,r.a.createElement(At,null,"Search Transcript"),r.a.createElement(It,{onChange:function(e,t){var n=t.value;u(n),a||document.dispatchEvent(new CustomEvent("update-scroll-position"))},value:l,placeholder:"Search transcript"}),""!==l&&r.a.createElement(Tt,null,s.length," results"),""!==l&&s.length>0&&r.a.createElement(Mt,null,r.a.createElement(_t,{searchText:l,transcript:s,handleSeek:n,isSearch:!0})),""===l&&r.a.createElement(Bt,null,"Enter a search term to get results."))},Ut=n(817),qt=n(266);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Vt=Object(g.a)(A.a)(function(e){return{borderBottomColor:e.disabled?"white":"black",borderBottomStyle:"solid",borderBottomWidth:"1.5px",width:"10em"}}),Ht=Object(g.a)(Ut.a)({"i.close":{top:"0 !important",right:"0 !important",color:"black !important"}}),Yt=Object(a.forwardRef)(function(e,t){return r.a.createElement(qt.a,{innerRef:t},r.a.createElement(I.a,e))}),zt=Object(g.a)(Yt)({backgroundColor:"white !important","i.share":{paddingRight:"1.5em"}}),Wt=g.a.div({display:"inline-block"}),Qt=function(e){var t=e.trim().split(":").reverse(),n=0;return t.forEach(function(e,t){(e=e.trim())&&(isNaN(e)||e.includes("-")?n+=NaN:n+=parseFloat(e)*Math.pow(60,t))}),n&&(n=Math.floor(n)),n},Gt=function(e){if(isNaN(e))return"INVALID TIME POINT";e=Math.floor(parseFloat(e));var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=e-3600*t-60*n;a<10&&(a="0".concat(a)),t>0&&n<10&&(n="0".concat(n));var r="".concat(n,":").concat(a);return t&&(r="".concat(t,":").concat(r)),r},Jt={value:"",isDisabled:!1,isActive:!1},Kt=function(e,t){switch(t.type){case"UPDATE_VALUE":return Lt({},e,{value:t.payload.value});case"VALIDATE_VALUE":return Lt({},e,{value:Gt(Qt(e.value))});case"UPDATE_ISDISABLED":return Lt({},e,{isDisabled:t.payload.isDisabled});case"UPDATE_ISACTIVE":return Lt({},e,{isActive:t.payload.isActive});default:return e}},Zt=function(e){var t=e.videoPlayerRef,n=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(b.g)(),l=Object(a.useState)(!1),u=Object(R.a)(l,2),s=u[0],m=u[1],p=Object(a.useReducer)(Kt,Jt),d=Object(R.a)(p,2),f=d[0],h=d[1],v=function(){h({type:"VALIDATE_VALUE"})};return r.a.createElement(a.Fragment,null,r.a.createElement(Ht,{closeIcon:!0,trigger:r.a.createElement(zt,{compact:!0,icon:!0,onClick:function(){var e;if(t.current){var n=t.current.getState().player;e=4===n.readyState?n.currentTime:0}else e=0;h({type:"UPDATE_VALUE",payload:{value:Gt(e)}}),h({type:"UPDATE_ISDISABLED",payload:{isDisabled:!1}}),h({type:"UPDATE_ISACTIVE",payload:{isActive:!1}}),m(!0)}},r.a.createElement(Z.a,{name:"share"}),"SHARE"),open:s,onClose:function(){i.current.inputRef.current.removeEventListener("blur",v),m(!1)},mountNode:n.current,onMount:function(){i.current.inputRef.current.addEventListener("blur",v)},size:"small"},r.a.createElement(Ut.a.Header,null,"Share"),r.a.createElement(Ut.a.Content,null,r.a.createElement(A.a,{fluid:!0,action:r.a.createElement(I.a,{primary:!0,content:"Copy",onClick:function(){c.current.select(),document.execCommand("copy")}}),ref:c,value:function(){var e=Qt(f.value),t="".concat(document.location.origin,"/#").concat(o.pathname);return f.isActive&&e?"".concat(t,"?t=").concat(e):"".concat(t)}()}),r.a.createElement("br",null),r.a.createElement(L.a,{onSubmit:v},r.a.createElement(L.a.Group,null,r.a.createElement(L.a.Checkbox,{label:"Start at",checked:f.isActive,onChange:function(e,t){var n=t.checked;h({type:"VALIDATE_VALUE"}),h({type:"UPDATE_ISDISABLED",payload:{isDisabled:!n}}),h({type:"UPDATE_ISACTIVE",payload:{isActive:n}})}}),r.a.createElement(Vt,{disabled:f.isDisabled,transparent:!0,value:f.value,onChange:function(e,t){var n=t.value;h({type:"UPDATE_VALUE",payload:{value:n}})},ref:i}))))),r.a.createElement(Wt,{ref:n}))},$t=n(822),Xt=n(813),en=g.a.ol({listStylePosition:"outside",paddingLeft:"1.5em"}),tn=g.a.div({fontSize:"1em",fontWeight:"500"}),nn=g.a.div({fontSize:"0.95em"}),an=g.a.ul({listStylePosition:"outside",listStyleType:"disc",paddingLeft:"2em"}),rn=function(e){var t=e.minutes,n=e.scPageUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Minutes"),r.a.createElement(en,null,t.map(function(e){var t=e.minutes_item;return r.a.createElement("li",{key:t.id},r.a.createElement(tn,null,t.matter?t.matter:t.name),t.matter&&t.matter!==t.name&&r.a.createElement(nn,null,t.name),t.file.length>0&&r.a.createElement(an,null,t.file.map(function(e){var t=e.id,n=e.name,a=e.uri;return r.a.createElement("li",{key:t},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:a},n))})))})),r.a.createElement("h3",null,"Links"),r.a.createElement("a",{href:n},"Seattle Channel Event Page"))},cn=n(820),on=[{accessor:"matter",text:"Matter",width:"2"},{accessor:"decision",text:"Decision",width:"1"},{accessor:"name",text:"Name",width:"6"},{accessor:"votingRecords",text:"Vote",width:"5"}],ln=Object(g.a)("div")({display:"flex"}),un=Object(g.a)("div")({width:"70%"}),sn=Object(g.a)("div")({width:"30%"}),mn=Object(g.a)(cn.a.Header)({"@media(max-width:767px)":{display:"none !important"}}),pn=function(e){var t=e.votingData,n=e.isPerson;return r.a.createElement(cn.a,{striped:!0},r.a.createElement(mn,null,r.a.createElement(cn.a.Row,null,on.map(function(e){return r.a.createElement(cn.a.HeaderCell,{key:e.text},e.text)}),n&&r.a.createElement(cn.a.HeaderCell,{key:"Event"},"Event"))),r.a.createElement(cn.a.Body,null,t.map(function(e){return r.a.createElement(cn.a.Row,{key:e.id},on.map(function(t){return"votingRecords"!==t.accessor?r.a.createElement(cn.a.Cell,{key:t.accessor,width:t.width},e[t.accessor]):e.formattedIndividualVotes?r.a.createElement(cn.a.Cell,{key:t.accessor,width:t.width},e.formattedIndividualVotes.map(function(e){return r.a.createElement(ln,{key:e.full_name},r.a.createElement(un,null,r.a.createElement(v.b,{to:"/people/".concat(e.person_id)},e.full_name)),r.a.createElement(sn,null,e.decision))})):r.a.createElement(r.a.Fragment,{key:t.accessor},r.a.createElement(cn.a.Cell,{singleLine:!0},e.voteForPerson),r.a.createElement(cn.a.Cell,null,r.a.createElement(v.b,{to:"/events/".concat(e.eventId)},r.a.createElement("span",null,e.body_name)),r.a.createElement("div",null,z(e.eventDate))))}))})))},dn=g.a.div({margin:"1em 0",width:"100%",fontSize:"16px",lineHeight:"1.5","a.item":{fontSize:"1.3em !important"}}),fn=Object(g.a)($t.a)({borderBottom:"0 !important",marginBottom:"1em !important",paddingTop:"1em !important",backgroundColor:"white !important",zIndex:"0 !important",width:"100%"}),hn=r.a.memo(function(e){var t=e.minutes,n=e.scPageUrl,a=e.transcript,c=e.votes,i=e.handleSeek,o=e.topOffset,l=e.mediaQueriesMatches,u=r.a.useState("details"),s=Object(R.a)(u,2),m=s[0],p=s[1],d=r.a.useRef(null);r.a.useEffect(function(){d.current.getBoundingClientRect().top<0&&(d.current.scrollIntoView(!0),l||window.scrollBy(0,-o))},[m,l,o]);var f=function(e,t){var n=t.name;p(n)};return r.a.createElement(dn,{ref:d},r.a.createElement(Xt.a,{context:d,offset:o,styleElement:{zIndex:"1"}},r.a.createElement(fn,{secondary:!0,pointing:!0},r.a.createElement($t.a.Item,{active:"details"===m,name:"details",onClick:f}),r.a.createElement($t.a.Item,{active:"transcript"===m,name:"transcript",onClick:f}),r.a.createElement($t.a.Item,{active:"votes"===m,name:"votes",onClick:f}))),{details:r.a.createElement(rn,{minutes:t,scPageUrl:n}),transcript:r.a.createElement(_t,{searchText:"",transcript:a,handleSeek:i,isSearch:!1}),votes:c.length?r.a.createElement(pn,{votingData:c}):r.a.createElement("div",null,"No votes found for this event.")}[m])}),vn=n(814),bn=n(129);var En=function(e){var t=Object(a.useState)(function(){return matchMedia(e).matches}),n=Object(R.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){var t=matchMedia(e),n=function(e){c(e.matches)};return t.addListener(n),function(){t.removeListener(n)}},[e]),r},yn=(n(797),g.a.div({display:"flex",flexWrap:"wrap",justifyContent:"space-between"})),gn=g.a.div({width:"100%",margin:"1em 0"}),wn=g.a.span({margin:"0.1em 0",color:"grey",fontWeight:"400"}),On=Object(g.a)(E.a.Inline)({display:"flex",justifyContent:"space-between",width:"100%","@media (min-aspect-ratio:5/4), (min-width:1200px)":{width:"59%"}}),jn=g.a.div({position:"absolute",left:"0",right:"0",visibility:"hidden",height:"90px",backgroundColor:"yellow"}),xn=g.a.div(function(e){return{position:"relative",display:"none","@media (min-aspect-ratio:5/4), (min-width:1200px)":{display:e.isFixed?"block":"none",width:"59%"}}}),kn=g.a.div({position:"absolute",top:"0",left:"0",backgroundColor:"black",height:"100%",width:"100%"}),Sn=g.a.div(function(e){return{width:"100%",position:"sticky",top:"0",zIndex:"2","@media (min-aspect-ratio:5/4), (min-width:1200px)":{position:e.isFixed?"fixed":"relative",width:e.isFixed?"20vw":"59%",right:"0"}}}),Pn=g.a.div({position:"relative",paddingTop:"56.25%"}),Cn=function(e){e.id;var t=e.title,n=e.date,a=e.minutes,c=e.scPageUrl,i=e.videoUrl,o=e.transcript,l=e.votes,u=e.query,s=e.videoTimePoint,m=r.a.useRef(null),p=r.a.useState(!1),d=Object(R.a)(p,2),f=d[0],h=d[1],v=En("(min-aspect-ratio:5/4), (min-width:1200px)"),b=r.a.useState(0),y=Object(R.a)(b,2),g=y[0],w=y[1];r.a.useEffect(function(){var e=m.current.video.video;e.disablePictureInPicture=!0,w(e.offsetHeight)},[]),r.a.useEffect(function(){var e=function(){var e=m.current.video.video;w(e.offsetHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]);var O=function(e){m.current.seek(parseFloat(e));var t=m.current.getState().player;!t.paused&&t.hasStarted||m.current.play()};return r.a.createElement(yn,null,r.a.createElement(gn,null,r.a.createElement("h1",null,t)),r.a.createElement(On,null,r.a.createElement(wn,null,z(n)),r.a.createElement(E.a.Inline,null,r.a.createElement(Zt,{videoPlayerRef:m}))),r.a.createElement(vn.a,{once:!1,onBottomPassed:function(){v&&h(!0)},onBottomPassedReverse:function(){v&&h(!1)}},r.a.createElement(jn,null)),r.a.createElement(xn,{isFixed:f},r.a.createElement(Pn,null,r.a.createElement(kn,null))),r.a.createElement(Sn,{isFixed:f},r.a.createElement(bn.Player,{fluid:!0,aspectRatio:"16:9",preload:s?"auto":"metadata",ref:m,src:i,startTime:s},r.a.createElement(bn.BigPlayButton,{position:"center"}),r.a.createElement(bn.ControlBar,{autoHide:!0},r.a.createElement(bn.VolumeMenuButton,{vertical:!0}),r.a.createElement(bn.PlaybackRateMenuButton,{rates:[2,1.5,1,.75],order:6.1})))),r.a.createElement(Nt,{transcript:o,handleSeek:O,mediaQueriesMatches:v,query:u}),r.a.createElement(hn,{minutes:a,scPageUrl:c,transcript:o,votes:l,handleSeek:O,topOffset:v?0:g,mediaQueriesMatches:v}))},Dn=function(e){var t=e.id,n=e.query,a=e.videoTimePoint,c=r.a.useState(),i=Object(R.a)(c,2),o=i[0],l=i[1];return lt(o?"".concat(o.name," - ").concat(z(o.date)):"Loading..."),r.a.useEffect(function(){try{Object(_.a)(D.a.mark(function e(){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(t);case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}},e)}))()}catch(e){}},[t]),o?r.a.createElement(Cn,{id:t,title:o.name,date:o.date,description:o.description,scPageUrl:o.scPageUrl,videoUrl:o.videoUrl,minutes:o.minutes,transcript:o.transcript,votes:o.votes,query:n,videoTimePoint:a}):r.a.createElement(Ot.a,{active:!0})},_n=Object(g.a)(y.a)({minHeight:"100vh"}),Rn=Object(g.a)(y.a)({marginTop:"2em !important",marginBottom:"5em !important"}),An=function(e){var t=e.match,n=e.location,a=F.a.parse(n.search),c=a.q,i=a.t;return r.a.createElement(_n,null,r.a.createElement(Rn,null,r.a.createElement(Dn,{id:t.params.id,query:function(){var e=c?c.trim().replace(/\+/g," "):"";return n.state&&(e=n.state.query||e),e}(),videoTimePoint:!i||isNaN(i)?0:Math.max(0,parseFloat(i))})))},In=Object(g.a)(y.a)({minHeight:"100vh"}),Tn=Object(g.a)(y.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Bn=function(){return r.a.createElement(In,null,r.a.createElement(Tn,null,r.a.createElement("h2",null,"All Events"),r.a.createElement(bt,null)))},Mn=Object(g.a)("div")({display:"flex",flexWrap:"wrap"}),Nn=Object(g.a)("div")({width:"250px",border:"1px solid #d4d4d5",boxShadow:"0 1px 3px 0 #d4d4d5",padding:"1.5rem",marginBottom:"1.5rem",borderRadius:"3px",marginRight:"2rem",cursor:"pointer",transition:".4s all",":hover":{transform:"scale(1.15)"}}),Un=Object(g.a)("h5")({fontWeight:600,fontSize:"1.2rem"}),qn=Object(b.h)(function(e){var t=e.people,n=e.history;return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Voting History"),r.a.createElement(Mn,null,t.map(function(e){var t=e.full_name,a=e.email,c=e.id;return r.a.createElement(Nn,{key:t,onClick:function(){return n.push("/people/".concat(c))}},r.a.createElement(Un,null,t),r.a.createElement("p",null,"City Council Member"),r.a.createElement("a",{href:"mailto:".concat(a)},a))})))}),Fn=function(){var e=Object(a.useState)(null),t=Object(R.a)(e,2),n=t[0],c=t[1];return lt("City Council Members"),Object(a.useEffect)(function(){function e(){return(e=Object(_.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),n?r.a.createElement(qn,{people:n}):r.a.createElement(Ot.a,{active:!0})},Ln=Object(g.a)(y.a)({minHeight:"100vh"}),Vn=Object(g.a)(y.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Hn=function(){return r.a.createElement(Ln,null,r.a.createElement(Vn,null,r.a.createElement(Fn,null)))},Yn=n(812),zn={marginRight:"0.5em"},Wn=function(e){var t=e.personHistory,n=t.full_name,c=t.email,i=t.phone,o=t.website,l=t.votes,u=ke.a.compact(ke.a.uniq(l.map(function(e){return e.voteForPerson}))),s=Object(a.useState)([]),m=Object(R.a)(s,2),p=m[0],d=m[1],f=Object(a.useState)(l),h=Object(R.a)(f,2),v=h[0],b=h[1],y=function(e,t){var n=t.label,a=[];p.includes(n)?(a=ke.a.without(p,n),d(a)):(p.push(n),d(a=p)),ke.a.isEmpty(a)?b(l):b(ke.a.filter(l,function(e){return a.includes(e.voteForPerson)}))},g=u.map(function(e,t){return r.a.createElement(Yn.a,{style:zn,key:t,label:e,onChange:y})});return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{as:"h1"},n),r.a.createElement(x.a,{columns:1,stackable:!0},r.a.createElement(x.a.Column,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{as:"h2"},"Contact information"),r.a.createElement("strong",null,"Email:")," ",r.a.createElement("a",{href:"mailto:".concat(c)},c),r.a.createElement("div",null,r.a.createElement("strong",null,"Phone:")," ",i),r.a.createElement("div",null,r.a.createElement("strong",null,"Website:")," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},o)))),r.a.createElement(x.a.Column,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{as:"h2"},"Voting record"),r.a.createElement(k.a,{as:"h3"},"Filter by vote cast"),r.a.createElement(L.a,null,g),r.a.createElement(pn,{votingData:v,isPerson:!0})))))},Qn=Object(b.h)(function(e){var t=e.match.params.id,n=Object(a.useState)(null),c=Object(R.a)(n,2),i=c[0],o=c[1];return lt(i?i.full_name:"Loading..."),Object(a.useEffect)(function(){function e(){return(e=Object(_.a)(D.a.mark(function e(){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t);case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),i?r.a.createElement(Wn,{personHistory:i}):r.a.createElement(Ot.a,{active:!0})}),Gn=Object(g.a)(y.a)({minHeight:"100vh"}),Jn=Object(g.a)(y.a)({marginTop:"2em !important",marginBottom:"5em !important"}),Kn=function(){return r.a.createElement(Gn,null,r.a.createElement(Jn,null,r.a.createElement(Qn,null)))};o.a.initialize("UA-145893191-1");var Zn=function(){return r.a.createElement(v.a,{basename:"/"},r.a.createElement(j,null),r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",component:h(U)}),r.a.createElement(b.a,{path:"/search",component:h(wt)}),r.a.createElement(b.a,{exact:!0,path:"/events",component:h(Bn)}),r.a.createElement(b.a,{path:"/events/:id",component:h(An)}),r.a.createElement(b.a,{exact:!0,path:"/people",component:h(Hn)}),r.a.createElement(b.a,{exact:!0,path:"/people/:id",component:h(Kn)})),r.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Zn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[448,1,2]]]);
//# sourceMappingURL=main.43283c29.chunk.js.map